Ejercicio integrador HTTP, DNS y MAIL
Suponga que registró bajo su propiedad el dominio redes2024.com.ar y dispone de 4 servidores:
- Un servidor DNS instalado configurado como primario de la zona redes2024.com.ar. (hostname: ns1 - IP: 203.0.113.65).
-  Un servidor DNS instalado configurado como secundario de la zona
redes2024.com.ar. (hostname: ns2 - IP: 203.0.113.66)
- Un servidor de correo electrónico (hostname: mail - IP: 203.0.113.111).
Permitirá a los usuarios envíar y recibir correos a cualquier dominio de
Internet.
- Un servidor WEB para el acceso a un webmail (hostname: correo - IP:
203.0.113.8). Permitirá a los usuarios gestionar vía web sus correos electrónicos a través de la URL https://webmail.redes2024.com.ar
a. ¿Qué información debería informar al momento del registro para hacer visible
a Internet el dominio registrado?
	Se deben definir los registros NS de `redes2024.com.ar` en el servidor DNS de la zona `com.ar` y los registros A para los NS previamente definidos.
b. ¿Qué registros sería necesario configurar en el servidor de nombres? Indique
toda la información necesaria del archivo de zona. Puede utilizar la siguiente
tabla de referencia (evalúe la necesidad de usar cada caso los siguientes
campos): Nombre del registro, Tipo de registro, Prioridad, TTL, Valor del
registro.
```python
$TTL 86400 ; Tiempo de vida por defecto para los registros (1 día)
@ IN SOA ns1.redes2024.com.ar. admin.redes2024.com.ar.
	 ( 2025052901 ; Serial (AñoMesDíaXX - incrementa en cada cambio)
	   10800 ; Refresh (3 horas) 
	   3600 ; Retry (1 hora)
	   604800 ; Expire (1 semana)
	   86400 ) ; Minimum TTL (1 día) 
;Servidores de Nombres (NS Records)
@ IN NS ns1.redes2024.com.ar.
@ IN NS ns2.redes2024.com.ar. 
;Registros A (Address) para los servidores 
ns1 IN A 203.0.113.65
ns2 IN A 203.0.113.66 
mail IN A 203.0.113.111 
correo IN A 203.0.113.8 
webmail IN A 203.0.113.8 ; Apunta al mismo servidor que 'correo' para el webmail ;
Registros MX (Mail Exchanger) para el servicio de correo 
@ IN MX 10 mail.redes2024.com.ar.
```
c. ¿Es necesario que el servidor de DNS acepte consultas recursivas?
Justifique.
	No es estrictamente necesario, pero si no se aceptan consultas recursivas no sería posible solicitar los registros de manera directa utilizando herramientas como `dig`, siempre habría que llegar mediante una consulta iterativa de un servidor DNS local que haga el trabajo.
d. ¿Qué servicios/protocolos de capa de aplicación configuraría en cada
servidor?
	ns1 y ns2 - DNS
	mail - SMTP (o SMTPS)
	correo - HTTPS y HTTP

_Si se quiere agregar POP e IMAP se necesita agregar un registro CNAME que apunte al servidor correo (MX de mail)._

e. Para cada servidor, ¿qué puertos considera necesarios dejar abiertos a
Internet?. A modo de referencia, para cada puerto indique: servidor, protocolo
de transporte y número de puerto.
- ns1 203.0.113.65:53 UDP
- ns1 203.0.113.66:53 UDP

- mail 203.0.113.111:25 TCP (SMTP)
- mail 203.0.113.111:110 TCP (POP3)
- mail 203.0.113.111:143 TCP (IMAP)

- correo/webmail 203.0.113.8:80 o 443 = si es http < 3.0 TCP sino UDP

f. ¿Cómo cree que se conectaría el webmail del servidor web con el servidor de
correo? ¿Qué protocolos usaría y para qué?
Para Acceder y Leer Correos (Bandeja de Entrada, Carpetas):
- Pop3 e IMAP para realizar la recuperación, gestión y lectura de correos. Utilizan el puerto 110 y 143 respectivamente. Si es IMAP tambien incluye gestión de carpetas.
Para Enviar correos:
- SMTP: utilizado por el MTA, MSA y MUA para enviar un correo electrónico y autenticar al usuario, utiliza el puerto 25.
g. ¿Cómo se podría hacer para que cualquier MTA reconozca como válidos los
mails provenientes del dominio redes2024.com.ar solamente a los que llegan
de la dirección 203.0.113.111? ¿Afectaría esto a los mails enviados desde el
Webmail? Justifique.
**SPF (Sender Policy Framework):** Configurar un registro SPF en la zona DNS de `redes2024.com.ar` que especifique qué servidores están autorizados a enviar correos en nombre de tu dominio, quedaría algo similar a :

```shell
redes2024.com.ar.  TXT  "v=spf1 a:mail.redes2024.com.ar -all"
```

O utilizando la IP directamente:

```shell
redes2024.com.ar.  TXT  "v=spf1 ip4:203.0.113.111 -all"
```

El `-all` indica que cualquier otrafuente no autorizada debería ser rechazada (hard fail).

h. ¿Qué característica propia de SMTP, IMAP y POP hace que al adjuntar una
imagen o un ejecutable sea necesario aplicar un encoding (ej. base64)?
SMTP, IMAP y POP históricamente estaban diseñados para transportar mensajes de texto plano ASCII de 7 bits.

**- SMTP (Simple Mail Transfer Protocol):** Protocolo base para el envío de correo electrónico se especificó para la transferencia de texto ASCII de 7 bits. Los datos binarios (como los de imágenes o ejecutables) contienen bytes con valores superiores a 127, que podrían ser interpretados incorrectamente o corrompidos por los sistemas de correo más antiguos que esperaban solo texto ASCII.

**- IMAP (Internet MEssage Access Protocol) y POP (Post Office Protocol):** Aunque estos protocolos se utilizan para la recepción y gestión de correo, también se basan en la estructura de los mensajes de correo electrónico, que originalmente se definieron para texto de 7 bits. Para asegurar la integridad de los datos adjuntos a través de todo el proceso de envío y recepción, era necesario codificarlos a un formato seguro para la transmisión en estos entornos.

**MIME (Multipurpose Internet Mail Extensions):** Se introdujo para superar esta limitación. MIME define estándares para el formato de los mensajes de correo electrónico que permiten incluir:

- Texto en juegos de caracteres distintos a ASCII (ej. UTF-8).
- Múltiples partes del mensaje (ej. cuerpo del texto y adjuntos).
- Datos no textuales como imágenes, audio, video y archivos ejecutables.

i. ¿Se podría enviar un mail a un usuario de modo que el receptor vea que el
remitente es un usuario distinto? En caso afirmativo, ¿Cómo? ¿Es una
indicación de una estafa? Justifique
	Si es posible, SMTP no incluye mecanismos robustos de autenticación del remitente. Al enviar un correo, el cliente o servidor SMTP especifica la dirección del remitente en dos lugares principales:
	1. **En el "sobre" SMTP (MAIL FROM):** Esta es la dirección que el servidor SMTP usa internamente para propósitos de entrega y rebotes (bounce messages). A menudo no es visible para el usuario final.
	2. **En los encabezados del correo (From:, Reply-To:, Sender:):** Esta es la dirección que la mayoría de los clientes de correo muestran al usuario como el remitente del mensaje.
	Esta practica se conoce como "**Spoofing de remitente" (Sender Spoofing)** y es considerado una estafa
j. ¿Se podría enviar un mail a un usuario de modo que el receptor vea que el
destinatario es un usuario distinto? En caso afirmativo, ¿Cómo? ¿Por qué no
le llegaría al destinatario que el receptor ve? ¿Es esto una indicación de una
estafa? Justifique
	Sí, es posible que el receptor vea que el destinatario es un usuario distinto al real.
	- **El "sobre" SMTP (RCPT TO):** Esta es la dirección que el servidor SMTP utiliza para la entrega real del correo. Si el servidor destino no es el responsable de ese dominio, el correo será reenviado o rebotará. Es la dirección "verdadera" de destino.
	- **Los encabezados del correo (To:, Cc:, Bcc:):** Estas son las direcciones que se incluyen _dentro del contenido del correo_ y que el cliente de correo muestra al usuario
**Sí, en la gran mayoría de los casos, es una indicación muy fuerte de una estafa, un intento de ingeniería social, o un comportamiento malicioso.**
k. ¿Qué protocolo usará nuestro MUA para enviar un correo con remitente
redes@info.unlp.edu.ar? ¿Con quién se conectará? ¿Qué información será
necesaria y cómo la obtendría?

l. Dado que solo disponemos de un servidor de correo, ¿qué sucederá con los
mails que intenten ingresar durante un reinicio del servidor?
m. Suponga que contratamos un servidor de correo electrónico en la nube para
integrarlo con nuestra arquitectura de servicios.
i. ¿Cómo configuraría el DNS para que ambos servidores de correo se
comporten de manera de dar un servicio de correo tolerante a fallos?